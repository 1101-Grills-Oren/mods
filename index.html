<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mod List</title>
    <!-- The style.css file allows you to change the look of your web pages.
         If you include the next line in all your web pages, they will all share the same look.
         This makes it easier to make new pages for your site. -->
    <link href="style.css" rel="stylesheet" type="text/css" media="all">
    
  </head>
  <body>

    <p id='title'>All Projects:</p>
    <span id="modholder">
      
    </span>
    <script>
      loadedModData={}
      loadedVersionData={}
      function getApiJsonGeneral(link){
        x=0;
        fetch(link).then(response =>{
          response.blob().then(respb=>{
            respb.text().then(respc=>{
              x=JSON.parse(respc);
            })
          }
                              )}
                                                                  )
        return x;
      }
      function getModData(modid){
        return getApiJsonGeneral("https://api.modrinth.com/v2/project/"+modid)
      }
      
      function getUserProjects(userid){
        return getApiJsonGeneral("https://api.modrinth.com/v2/user/"+userid+"/projects")
      }

      function getVersionData(projectVersion){
        return getApiJsonGeneral("https://api.modrinth.com/v2/version/"+projectVersion)
      }

      function getAnalytics(){
        return getApiJsonGeneral("https://api.modrinth.com/v3/analytics/downloads?start_date=1970-01-01T00:00:00.000Z&end_date=2025-09-08T23:44:24.678Z&resolution_minutes=40320&project_ids=[\"CJpJjU7m\",\"6H8ynuG6\",\"3SikDTGm\",\"DNmbfVe1\"]")
      }
      
      function getUserProjectsInDepth(userid){
        a=getUserProjects(userid);
        for(i=0; i<a.length;i++){
          b=a[i].versions;
          tviews=0;
          for(j=0; j<b.length;j++){
            b[j]=getVersionData(b[j]);
            tviews+=b[j].
          }
          a[i].versions=b;
        }
      }
      console.log(fetch("https://raw.githubusercontent.com/1101-Grills-Oren/mods/refs/heads/main/README.md"))
      mods=[{name:'Improved Physics',types:['mod'],versions:['1.20.1'],platforms:['fabric'],link:'https://modrinth.com/mod/improved-physics'},
           {name:'Barrel Shops',types:['datapack'],versions:['1.21'],platforms:['datapack'],link:'https://modrinth.com/datapack/barrel-shops'},
           {name:'Trim Effects Mewo',types:['datapack'],versions:['1.20.1'],platforms:['datapack'],link:'https://modrinth.com/datapack/trim-effects-mewo'},
           {name:'Quality Commands',types:['mod'],versions:['1.20.1'],platforms:['fabric'],link:'https://modrinth.com/mod/quality-commands'}]
      function doesOverlap(lista,listb){
        for(i=0;i<lista.length;i++){
          for(j=0;j<listb.length;j++){
            if(lista[i]==listb[j]){
              return true;
            }
          }
        }
        return false;
      }
      function addtolist(parent,content,link,platforms,versions){
        n=document.createElement('p')
        x=document.createElement('a')
        x.textContent=content
        x.href=link
        x.style.color="#00FF00"
        n.append(x)
        x=document.createElement('span')
        x.textContent='          Platforms:'+platforms.join(',')+"    Versions: "+versions.join(',')
        n.append(x)
        n.style.color='#0000FF'
        parent.append(n)
      }
      function reset(parent){
        for(i=0;parent.children.length!=0;i++){
          console.log('removing')
          parent.removeChild(parent.children[0])
        }
      }
      function loadonly(platforms,versions,types){
      modholder=document.querySelector("#modholder");
      reset(modholder)
      for(k=0;k<mods.length;k++){
        console.log('tryadd'+k)
        if((versions.length==0)||(doesOverlap(versions,mods[k]['versions']))){
          if((platforms.length==0)||(doesOverlap(platforms,mods[k]['platforms']))){
            if((types.length==0)||(doesOverlap(types,mods[k]['types']))){
              console.log('add'+k)
              addtolist(modholder,mods[k]['name'],mods[k]['link'],mods[k]['platforms'],mods[k]['versions'])
            }
          }
        }
      }
      }
      loadonly([],[],[])
    </script>
  </body>
</html>
